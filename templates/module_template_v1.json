{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8c447ece-a028-4124-aa3e-d966dfeace69","type":"text/plain","content":"User input"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"b7598244-4148-498b-a4a7-6723cf33edd4","typeOfStateId":"state","$connId":"con_3","$id":"bea2dc50-239c-424a-8e36-c6587e1688e4","conditions":[{"values":[],"source":"context","comparison":"exists","variable":"message@to.subflowStateId"},{"values":["default"],"source":"context","comparison":"notEquals","variable":"message@to.subflowStateId"}],"$invalid":false},{"stateId":"fd93213c-00d9-46d2-8a99-046a0b1a43df","typeOfStateId":"state","$connId":"con_8","$id":"770ccbd5-3f7b-47ec-9295-e0a08e2273b4","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"64b79f8f-8fdf-4c80-adc3-fedc632cf54c","$typeOfContent":"","type":"TrackEvent","$title":"Service origem","$invalid":false,"settings":{"extras":{},"category":"{{subflow@name}} origem","action":"{{origin}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"isAiGenerated":false,"$tags":[{"id":"blip-tag-a2f96e5c-4c77-4146-ba44-03f0abf6875b","label":"TrackEvent","background":"#61D36F","canChangeBackground":false}],"id":"onboarding","root":true,"$title":"Start","$position":{"top":"144px","left":"675px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f721da4c-1898-4b4a-aed7-817a1fec4991","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"112c47c1-ab63-4bfa-af27-8b5d5740da88","$typeOfContent":"","type":"ExecuteScript","$title":"SET redirect","$invalid":false,"settings":{"function":"run","source":"{{globalScripts}}\n\nfunction run(subflow) {\n\tsubflow = JSON.parse(subflow)\n\n\tconst origin = setOrigin({\n\t\tservice: subflow.name,\n\t\tserviceId: subflow.id,\n\t\tstateId: '{{state.previous.id}}', \n\t\tstateName: '{{state.previous.name}}'\n\t});\n\n\treturn redirect(origin);\n}","inputVariables":["subflow"],"outputVariable":"redirect","LocalTimeZoneEnabled":false},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"end","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"id":"blip-tag-016809b4-045c-4053-aced-bed912e76a81","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false}],"id":"fallback","$title":"Exceptions","$position":{"top":"154px","left":"1546px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"end":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"a4ae7f2a-eb06-4615-90c5-8789c855fd6d","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"isAiGenerated":false,"$tags":[],"id":"end","end":true,"$title":"End","$position":{"top":"330px","left":"1755px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1cfaf1d7-a23d-4356-a858-178830d2a3ab":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"b20faea7-2eae-43e9-9f4a-261db2073b01","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:16285"}],"$conditionOutputs":[{"typeOfStateId":"state","$connId":"con_13","$id":"5f15f6e7-44c6-486e-9ba0-2ea67597de53","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:16301"}],"$invalid":false,"stateId":"end","$$hashKey":"object:16287"}],"$enteringCustomActions":[{"$id":"47b3a282-0f29-408d-8c22-0f58fa5a5120","$typeOfContent":"","type":"ExecuteScript","$title":"SET subflow (disable)","$invalid":false,"settings":{"function":"run","source":"{{globalScripts}}\n\nfunction run(stateId, stateName) {\n\treturn disableSubflowMode(stateId, stateName);\n}","inputVariables":["state.id","state.name"],"outputVariable":"subflow","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[{"$id":"38791e7d-8eb3-493a-b124-0a8e35caf416","$typeOfContent":"","type":"ExecuteScript","$title":"SET redirect","$invalid":false,"settings":{"function":"run","source":"{{globalScripts}}\n\nfunction run(subflow, callerMessage) {\n\tsubflow = JSON.parse(subflow)\n\tcallerMessage = JSON.parse(callerMessage)\n\n\tconst origin = setOrigin({\n\t\tservice: subflow.name,\n\t\tserviceId: subflow.id, \n\t\tstateId: '{{state.previous.id}}', \n\t\tstateName: '{{state.previous.name}}'\n\t});\n\n\tconst destination = setDestination({\n\t\tstateName: callerMessage.from.service,\n\t\tstateId: callerMessage.from.serviceId,\n\t\tsubflowStateName: callerMessage.from.stateName,\n\t\tsubflowStateId: callerMessage.from.stateId\n\t})\n\n\treturn redirect(origin, destination, { isModuleResponse: true });\n}","inputVariables":["subflow","callerMessage"],"outputVariable":"redirect","LocalTimeZoneEnabled":false},"conditions":[{"values":["default"],"source":"context","comparison":"equals","variable":"redirect","$$hashKey":"object:16454"}]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"end","$invalid":false,"typeOfStateId":"state"},"isAiGenerated":false,"$tags":[{"id":"blip-tag-3fbb0d08-d435-4465-ad9e-d4dcc8031b70","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false}],"id":"1cfaf1d7-a23d-4356-a858-178830d2a3ab","root":false,"$title":"Leave Subflow","$position":{"top":"154px","left":"1755px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false,"invalidOutputs":true},"b7598244-4148-498b-a4a7-6723cf33edd4":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"48b64c7d-32e8-4a27-ab76-ce05e2fa9b6d","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"{{message@to.subflowStateId}}","$invalid":false,"typeOfStateId":"variable"},"isAiGenerated":false,"$tags":[],"id":"b7598244-4148-498b-a4a7-6723cf33edd4","root":false,"$title":"Go to subflowStateId","$position":{"top":"143px","left":"922px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fd93213c-00d9-46d2-8a99-046a0b1a43df":{"$contentActions":[{"action":{"$id":"a0d1af7c-11c6-473a-b1d9-dc9f2483e810","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"b1fccb91-490c-4c6f-abd9-2b46f531cc4d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"b1fccb91-490c-4c6f-abd9-2b46f531cc4d","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"34830948-10c8-48f1-b9a7-13b2d1ec9e7b","$typeOfContent":"text","type":"SendMessage","settings":{"id":"f762172b-05e6-455b-a861-17cb6b76411d","type":"text/plain","content":"‚ö†Ô∏è <i>If this is your first Module, please make sure to follow the steps contained in this doc</i>: https://github.com/brbnk/blip-subflows/wiki/03.-Configurations#configure-a-module\n\nAfter that, you can <b>delete</b> the current block if you want.","metadata":{}},"$cardContent":{"document":{"id":"f762172b-05e6-455b-a861-17cb6b76411d","type":"text/plain","content":"‚ö†Ô∏è <i>If this is your first Module, please make sure to follow the steps contained in this doc</i>: https://github.com/brbnk/blip-subflows/wiki/03.-Configurations#configure-a-module\n\nAfter that, you can <b>delete</b> the current block if you want."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a8f74d63-d41f-48ce-abc8-0fa3d462c789","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e829847d-13dc-4975-b222-51b7336d9415","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e829847d-13dc-4975-b222-51b7336d9415","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"21817cb0-62fd-4b04-90a6-c5476ae014ca","$typeOfContent":"text","type":"SendMessage","settings":{"id":"de34eef3-ee72-4c0a-b97c-5ba45f40f0b7","type":"text/plain","content":"üí° <b>Tip</b>: <i>Check the <b>utilities</b> doc if you desire to boost your development productivity</i>: https://github.com/brbnk/blip-subflows/wiki/04.-Utilities","metadata":{}},"$cardContent":{"document":{"id":"de34eef3-ee72-4c0a-b97c-5ba45f40f0b7","type":"text/plain","content":"üí° <b>Tip</b>: <i>Check the <b>utilities</b> doc if you desire to boost your development productivity</i>: https://github.com/brbnk/blip-subflows/wiki/04.-Utilities"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"c1e1acd3-b1a6-4b00-8662-6c5fc6f54dee","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"isAiGenerated":false,"$tags":[{"id":"blip-tag-9ea92597-b2da-4203-aec0-817535c64b4a","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"fd93213c-00d9-46d2-8a99-046a0b1a43df","root":false,"$title":"README","$position":{"top":"307px","left":"675px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$tags":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false}}
